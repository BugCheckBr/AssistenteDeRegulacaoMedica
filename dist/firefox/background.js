(()=>{"use strict";var e,a={40:(e,a,t)=>{var i=t(574),n=t(322),s=t(657);const r="undefined"!=typeof browser?browser:chrome;async function o(e){try{r.sidePanel?(await r.sidePanel.open({windowId:e.windowId}),(0,n.fH)("Sidebar aberto via sidePanel API",{windowId:e.windowId},n.Uu.BACKGROUND_SCRIPT)):r.sidebarAction?(await r.sidebarAction.toggle(),(0,n.fH)("Sidebar alternado via sidebarAction API",{},n.Uu.BACKGROUND_SCRIPT)):(0,n.FF)("Nenhuma API de sidebar disponível",{},n.Uu.BACKGROUND_SCRIPT)}catch(a){(0,n.vV)("Falha ao abrir sidebar",{errorMessage:a.message,tabId:e.id,windowId:e.windowId},n.Uu.BACKGROUND_SCRIPT)}}r.runtime.onMessage.addListener(async e=>{if("SAVE_REGULATION_DATA"===e.type){(0,n.fH)("Recebido pedido para salvar dados da regulação",{payloadType:typeof e.payload,hasPayload:!!e.payload},n.Uu.BACKGROUND_SCRIPT);try{const a=await(0,i.hr)(e.payload);a?(await r.storage.local.set({pendingRegulation:a}),(0,n.fH)("Detalhes da regulação salvos no storage local com sucesso",{regulationId:a.id||"unknown",hasDetails:!!a},n.Uu.BACKGROUND_SCRIPT)):(0,n.FF)("Não foram encontrados detalhes para a regulação",{payloadType:typeof e.payload},n.Uu.BACKGROUND_SCRIPT)}catch(a){(0,n.vV)("Falha ao buscar ou salvar dados da regulação",{errorMessage:a.message,errorType:a.constructor.name},n.Uu.BACKGROUND_SCRIPT)}return!0}}),r.action.onClicked.addListener(o),new s.E,r.runtime.onInstalled.addListener(e=>{(0,n.fH)("Extensão instalada/atualizada",{reason:e.reason,version:r.runtime.getManifest().version},n.Uu.EXTENSION_LIFECYCLE),r.sidePanel&&r.sidePanel.setPanelBehavior({openPanelOnActionClick:!1}).catch(e=>(0,n.vV)("Falha ao definir o comportamento do sidePanel",{errorMessage:e.message},n.Uu.BACKGROUND_SCRIPT)),r.contextMenus.create({id:"openSidePanel",title:"Alternar Assistente de Regulação",contexts:["all"]}),r.contextMenus.onClicked.addListener((e,a)=>{"openSidePanel"===e.menuItemId&&o(a)}),"install"===e.reason&&((0,n.fH)("Primeira instalação detectada, abrindo página de ajuda",{},n.Uu.EXTENSION_LIFECYCLE),r.tabs.create({url:r.runtime.getURL("help.html")}))})},657:(e,a,t)=>{t.d(a,{E:()=>n});var i=t(574);class n{constructor(){this.intervalId=null,this.isActive=!1,this.intervalMinutes=10,this.init()}async init(){await this.loadSettings(),"undefined"!=typeof browser&&browser.storage.onChanged.addListener((e,a)=>{"sync"===a&&e.keepSessionAliveInterval&&this.updateInterval(e.keepSessionAliveInterval.newValue)})}async loadSettings(){try{const e="undefined"!=typeof browser?browser:chrome,a=await e.storage.sync.get({keepSessionAliveInterval:10});this.updateInterval(a.keepSessionAliveInterval)}catch(e){}}updateInterval(e){const a=parseInt(e,10)||0;this.intervalMinutes=a,this.stop(),this.intervalMinutes>0&&this.start()}start(){if(this.intervalMinutes<=0)return;if(this.isActive)return;const e=60*this.intervalMinutes*1e3;this.intervalId=setInterval(async()=>{try{await i.JA()}catch(e){}},e),this.isActive=!0}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.isActive=!1}getStatus(){return{isActive:this.isActive,intervalMinutes:this.intervalMinutes,nextExecution:this.isActive?new Date(Date.now()+60*this.intervalMinutes*1e3):null}}}}},t={};function i(e){var n=t[e];if(void 0!==n)return n.exports;var s=t[e]={exports:{}};return a[e](s,s.exports,i),s.exports}i.m=a,e=[],i.O=(a,t,n,s)=>{if(!t){var r=1/0;for(c=0;c<e.length;c++){for(var[t,n,s]=e[c],o=!0,l=0;l<t.length;l++)(!1&s||r>=s)&&Object.keys(i.O).every(e=>i.O[e](t[l]))?t.splice(l--,1):(o=!1,s<r&&(r=s));if(o){e.splice(c--,1);var d=n();void 0!==d&&(a=d)}}return a}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[t,n,s]},i.d=(e,a)=>{for(var t in a)i.o(a,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},i.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),i.j=471,(()=>{var e={424:0,471:0};i.O.j=a=>0===e[a];var a=(a,t)=>{var n,s,[r,o,l]=t,d=0;if(r.some(a=>0!==e[a])){for(n in o)i.o(o,n)&&(i.m[n]=o[n]);if(l)var c=l(i)}for(a&&a(t);d<r.length;d++)s=r[d],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(c)},t=self.webpackChunkassistente_de_regulacao_medica=self.webpackChunkassistente_de_regulacao_medica||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))})();var n=i.O(void 0,[76],()=>i(40));n=i.O(n)})();