"use strict";(self.webpackChunkassistente_de_regulacao_medica=self.webpackChunkassistente_de_regulacao_medica||[]).push([[76,984],{322:(e,t,a)=>{a.d(t,{FF:()=>f,L9:()=>m,Uu:()=>l,fH:()=>g,vV:()=>v});const s=1,n=2,i=3,o=4,r=5,l={SIGSS_API:"sigss_api",CADSUS_API:"cadsus_api",MEDICAL_DATA:"medical_data",EXTENSION_LIFECYCLE:"extension_lifecycle",CONTENT_SCRIPT:"content_script",BACKGROUND_SCRIPT:"background_script",SECURITY:"security",PERMISSIONS:"permissions",CSP_VIOLATION:"csp_violation",MEMORY:"memory",STORAGE:"storage",NETWORK:"network",USER_INTERFACE:"user_interface",USER_INPUT:"user_input"},d=["cpf","rg","cns","cartao_sus","nome","nome_completo","nome_mae","nome_pai","data_nascimento","idade","sexo","genero","endereco","rua","numero","bairro","cidade","cep","telefone","celular","email","diagnostico","cid","procedimento","medicamento","dosagem","tratamento","senha","password","token_acesso"],c=["id","uuid","reguId","reguIdp","reguIds","isenPK","isenFullPKCrypto","sessionId","requestId","transactionId","correlationId"];class u{constructor(){this.config=(()=>{let e=!1;try{e="undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.getManifest&&chrome.runtime.getManifest().version.includes("dev")}catch{e=!1}return{minLevel:e?s:n,enableConsoleLogging:!0,enableErrorStorage:!0,maxStoredErrors:100,enableStackTraces:e,enablePerformanceTiming:!0}})(),this.errorObservers=[],this.performanceMarks=new Map,this.initializeErrorStorage(),this.setupGlobalErrorHandling()}async initializeErrorStorage(){if(this.config.enableErrorStorage)try{const e="undefined"!=typeof browser?browser:chrome;(await e.storage.local.get("medicalErrors")).medicalErrors||await e.storage.local.set({medicalErrors:[]})}catch(e){}}setupGlobalErrorHandling(){"undefined"!=typeof window&&(window.addEventListener("error",e=>{this.logError("Erro JavaScript não tratado",{message:e.message,filename:this.sanitizeFilename(e.filename),lineno:e.lineno,colno:e.colno},l.EXTENSION_LIFECYCLE)}),window.addEventListener("unhandledrejection",e=>{var t;this.logError("Promise rejeitada não tratada",{reason:(null===(t=e.reason)||void 0===t?void 0:t.message)||"Unknown error"},l.EXTENSION_LIFECYCLE)})),"undefined"!=typeof document&&document.addEventListener("securitypolicyviolation",e=>{this.logError("Violação de CSP detectada",{directive:e.violatedDirective,blockedURI:e.blockedURI,disposition:e.disposition},l.CSP_VIOLATION)})}sanitizeForLogging(e,t="MEDICAL_DATA"){if(null==e)return e;if("object"!=typeof e)return"string"==typeof e&&e.length>100?`${e.substring(0,100)}...`:e;if(Array.isArray(e))return e.length>5?[...e.slice(0,5).map(e=>this.sanitizeForLogging(e,t)),`...${e.length-5} more items`]:e.map(e=>this.sanitizeForLogging(e,t));const a={};for(const[s,n]of Object.entries(e))this.isSensitiveField(s)?a[s]="[SANITIZED_MEDICAL_DATA]":c.includes(s)?a[s]=n:a[s]="object"==typeof n&&null!==n?this.sanitizeForLogging(n,t):n;return a}isSensitiveField(e){const t=e.toLowerCase();return d.some(e=>t.includes(e.toLowerCase()))}sanitizeFilename(e){if(!e)return"unknown";const t=e.split(/[/\\]/);return t[t.length-1]||"unknown"}logInfo(e,t=null,a=l.EXTENSION_LIFECYCLE){this.log(n,e,t,a)}logWarning(e,t=null,a=l.EXTENSION_LIFECYCLE){this.log(i,e,t,a)}logError(e,t=null,a=l.EXTENSION_LIFECYCLE){this.log(o,e,t,a)}logFatal(e,t=null,a=l.EXTENSION_LIFECYCLE){this.log(r,e,t,a)}logDebug(e,t=null,a=l.EXTENSION_LIFECYCLE){this.log(s,e,t,a)}log(e,t,a=null,s=l.EXTENSION_LIFECYCLE){if(e<this.config.minLevel)return;const n=a?this.sanitizeForLogging(a):null,i={timestamp:(new Date).toISOString(),level:this.getLevelName(e),category:s,message:t,data:n,userAgent:"undefined"!=typeof navigator?navigator.userAgent:"Unknown",extensionVersion:this.getExtensionVersion()};this.config.enableStackTraces&&e>=o&&(i.stack=(new Error).stack),this.config.enableConsoleLogging&&this.outputToConsole(e,i),this.config.enableErrorStorage&&e>=o&&this.storeError(i),this.notifyObservers(i)}outputToConsole(e,t){t.category,t.message}async storeError(e){try{const t="undefined"!=typeof browser?browser:chrome;let a=(await t.storage.local.get("medicalErrors")).medicalErrors||[];a.unshift(e),a.length>this.config.maxStoredErrors&&(a=a.slice(0,this.config.maxStoredErrors)),await t.storage.local.set({medicalErrors:a})}catch(t){}}notifyObservers(e){this.errorObservers.forEach(t=>{try{t(e)}catch(a){}})}subscribe(e){this.errorObservers.push(e)}unsubscribe(e){const t=this.errorObservers.indexOf(e);t>-1&&this.errorObservers.splice(t,1)}startPerformanceMark(e){this.config.enablePerformanceTiming&&this.performanceMarks.set(e,Date.now())}endPerformanceMark(e,t=l.EXTENSION_LIFECYCLE){if(!this.config.enablePerformanceTiming)return;const a=this.performanceMarks.get(e);if(a){const s=Date.now()-a;this.logInfo(`Performance: ${e} took ${s}ms`,{duration:s},t),this.performanceMarks.delete(e)}}getLevelName(e){return["TRACE","DEBUG","INFO","WARN","ERROR","FATAL"][e]||"UNKNOWN"}getExtensionVersion(){try{return"undefined"!=typeof chrome&&chrome.runtime?chrome.runtime.getManifest().version:"unknown"}catch{return"unknown"}}async getStoredErrors(){try{const e="undefined"!=typeof browser?browser:chrome;return(await e.storage.local.get("medicalErrors")).medicalErrors||[]}catch(e){return this.logWarning("Falha ao recuperar errors armazenados",{error:e.message}),[]}}async clearStoredErrors(){try{const e="undefined"!=typeof browser?browser:chrome;await e.storage.local.set({medicalErrors:[]}),this.logInfo("Errors armazenados limpos")}catch(e){this.logWarning("Falha ao limpar errors armazenados",{error:e.message})}}}let p=null;function m(){return p||(p=new u),p}const h=m(),g=(e,t,a)=>h.logInfo(e,t,a),f=(e,t,a)=>h.logWarning(e,t,a),v=(e,t,a)=>h.logError(e,t,a)},335:(e,t,a)=>{a.d(t,{M:()=>i});const s={currentPatient:{ficha:null,cadsus:null,lastCadsusCheck:null,isUpdating:!1},recentPatients:[],savedFilterSets:{}},n=[],i={subscribe:e=>(n.push(e),()=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)}),_notify(){for(const t of n)try{t()}catch(e){}},setPatient(e,t){s.currentPatient.ficha=e,s.currentPatient.cadsus=t,s.currentPatient.lastCadsusCheck=t?new Date:null,s.currentPatient.isUpdating=!1,this._notify()},clearPatient(){s.currentPatient.ficha=null,s.currentPatient.cadsus=null,s.currentPatient.lastCadsusCheck=null,s.currentPatient.isUpdating=!1,this._notify()},setPatientUpdating(){s.currentPatient.isUpdating=!0,this._notify()},getPatient:()=>s.currentPatient.ficha?s.currentPatient:null,setRecentPatients(e){s.recentPatients=e,this._notify()},getRecentPatients:()=>s.recentPatients,setSavedFilterSets(e){s.savedFilterSets=e,this._notify()},getSavedFilterSets:()=>s.savedFilterSets,getState:()=>({currentPatient:{...s.currentPatient},recentPatients:[...s.recentPatients],savedFilterSets:{...s.savedFilterSets}})}},338:(e,t,a)=>{a.d(t,{N:()=>r,Q:()=>o});var s=a(733),n=a(335);if(61==a.j)var i=a(239);function o(e,t){return t.key!==e?"":"asc"===t.order?"▲":"▼"}class r{constructor(e,t,a){this.sectionKey=e,this.prefix=this.getPrefix(e),this.config=t,this.globalSettings=a,this.allData=[],this.currentPatient=null,this.isLoading=!1,this.sortState={...t.initialSortState},this.fetchType="all",this.elements={},this.init()}getPrefix(e){return{consultations:"consultation",exams:"exam",appointments:"appointment",regulations:"regulation",documents:"document"}[e]||e}init(){this.cacheDomElements(),this.renderFilterControls(),this.addEventListeners(),n.M.subscribe(()=>this.onStateChange())}onStateChange(){var e,t,a;const s=n.M.getPatient(),i=s?s.ficha:null;(null===(e=this.currentPatient)||void 0===e||null===(t=e.isenPK)||void 0===t?void 0:t.idp)!==(null==i||null===(a=i.isenPK)||void 0===a?void 0:a.idp)&&this.setPatient(i),this.populateSavedFilterDropdown()}cacheDomElements(){const{sectionKey:e,prefix:t}=this;this.elements={section:document.getElementById(`${e}-section`),wrapper:document.getElementById(`${e}-wrapper`),content:document.getElementById(`${e}-content`),fetchBtn:document.getElementById(`fetch-${e}-btn`),toggleBtn:document.getElementById(`toggle-${e}-list-btn`),toggleMoreBtn:document.getElementById(`toggle-more-${t}-filters-btn`),clearBtn:document.getElementById(`clear-${t}-filters-btn`),mainFilters:document.getElementById(`${t}-main-filters`),moreFilters:document.getElementById(`${t}-more-filters`),automationFeedback:document.getElementById(`${e}-automation-feedback`)}}addEventListeners(){var e,t,a,s,n,o,r,l,d,c,u,p,m,h;this._listeners||(this._listeners={});const g=this.elements;null===(e=g.fetchBtn)||void 0===e||e.removeEventListener("click",this._listeners.onFetchBtnClick),null===(t=g.toggleBtn)||void 0===t||t.removeEventListener("click",this._listeners.onToggleBtnClick),null===(a=g.toggleMoreBtn)||void 0===a||a.removeEventListener("click",this._listeners.onToggleMoreBtnClick),null===(s=g.clearBtn)||void 0===s||s.removeEventListener("click",this._listeners.onClearBtnClick),null===(n=g.section)||void 0===n||n.removeEventListener("input",this._listeners.onSectionInput),null===(o=g.section)||void 0===o||o.removeEventListener("change",this._listeners.onSectionChange),null===(r=g.section)||void 0===r||r.removeEventListener("click",this._listeners.onSectionClick),this._listeners.onFetchBtnClick=this.onFetchBtnClick.bind(this),this._listeners.onToggleBtnClick=this.onToggleBtnClick.bind(this),this._listeners.onToggleMoreBtnClick=this.onToggleMoreBtnClick.bind(this),this._listeners.onClearBtnClick=this.onClearBtnClick.bind(this),this._listeners.onSectionInput=i.sg(this.onSectionInput.bind(this),300),this._listeners.onSectionChange=this.onSectionChange.bind(this),this._listeners.onSectionClick=this.onSectionClick.bind(this),null===(l=g.fetchBtn)||void 0===l||l.addEventListener("click",this._listeners.onFetchBtnClick),null===(d=g.toggleBtn)||void 0===d||d.addEventListener("click",this._listeners.onToggleBtnClick),null===(c=g.toggleMoreBtn)||void 0===c||c.addEventListener("click",this._listeners.onToggleMoreBtnClick),null===(u=g.clearBtn)||void 0===u||u.addEventListener("click",this._listeners.onClearBtnClick),null===(p=g.section)||void 0===p||p.addEventListener("input",this._listeners.onSectionInput),null===(m=g.section)||void 0===m||m.addEventListener("change",this._listeners.onSectionChange),null===(h=g.section)||void 0===h||h.addEventListener("click",this._listeners.onSectionClick)}onFetchBtnClick(){this.fetchData()}onToggleBtnClick(){this.toggleSection()}onToggleMoreBtnClick(){this.toggleMoreFilters()}onClearBtnClick(){this.clearFilters()}onSectionInput(e){e.target.matches("input[type='text'], input[type='date']")&&this.applyFiltersAndRender()}onSectionChange(e){e.target.matches("select, input[type='checkbox']")&&(e.target.closest(".filter-select-group")?this.handleFetchTypeChange(e.target):this.applyFiltersAndRender()),e.target.id===`${this.prefix}-saved-filters-select`&&this.loadFilterSet()}onSectionClick(e){const t=e.target,a=t.closest(".sort-header");a&&this.handleSort(a.dataset.sortKey),t.closest(`#${this.prefix}-save-filter-btn`)&&this.saveFilterSet(),t.closest(`#${this.prefix}-delete-filter-btn`)&&this.deleteFilterSet(),t.closest(".clear-automation-btn")&&this.clearAutomationFeedbackAndFilters(!0)}setPatient(e){this.currentPatient=e,this.allData=[],this.clearFilters(!1),this.clearAutomationFeedbackAndFilters(!1),this.applyFiltersAndRender(),this.elements.section&&(this.elements.section.style.display=e?"block":"none"),e&&this.globalSettings.userPreferences[`autoLoad${this.sectionKey.charAt(0).toUpperCase()+this.sectionKey.slice(1)}`]&&this.fetchData()}async fetchData(){if(this.currentPatient){if(!this.isLoading){this.isLoading=!0,this.elements.content.innerHTML='<p class="text-slate-500">Carregando...</p>';try{var e;const t=null===(e=this.elements.mainFilters)||void 0===e?void 0:e.querySelector(`#${this.prefix}-fetch-type-buttons`);t&&(this.fetchType=t.value);const a=this.elements.dateInitial?this.elements.dateInitial.value:null,s=this.elements.dateFinal?this.elements.dateFinal.value:null,n={isenPK:`${this.currentPatient.isenPK.idp}-${this.currentPatient.isenPK.ids}`,isenFullPKCrypto:this.currentPatient.isenFullPKCrypto,dataInicial:a?new Date(a).toLocaleDateString("pt-BR"):"01/01/1900",dataFinal:s?new Date(s).toLocaleDateString("pt-BR"):(new Date).toLocaleDateString("pt-BR"),type:this.fetchType};"exams"===this.sectionKey&&(n.comResultado="withResult"===this.fetchType||"all"===this.fetchType,n.semResultado="withoutResult"===this.fetchType||"all"===this.fetchType);const i=await this.config.fetchFunction(n);this.allData=Array.isArray(i)?i:i.jsonData||[]}catch(t){const e={consultations:"consultas",exams:"exames",appointments:"agendamentos",regulations:"regulações",documents:"documentos"}[this.sectionKey]||this.sectionKey;i.rG(`Erro ao buscar ${e}. Verifique a conexão e a URL base.`),this.allData=[]}finally{this.isLoading=!1,this.applyFiltersAndRender()}}}else"none"!==this.elements.section.style.display&&i.rG("Nenhum paciente selecionado.")}applyFiltersAndRender(){let e=[...this.allData];this.config.filterLogic&&(e=this.config.filterLogic(e,this.getFilterValues(),this.fetchType));const t=this.sortData(e);this.config.renderFunction(t,this.sortState,this.globalSettings),this.updateActiveFiltersIndicator()}sortData(e){const{key:t,order:a}=this.sortState;return[...e].sort((e,s)=>{let n,o;return"date"===t||"sortableDate"===t?(n=e.sortableDate||i._U(e.date),o=s.sortableDate||i._U(s.date)):(n=(e[t]||"").toString().toLowerCase(),o=(s[t]||"").toString().toLowerCase()),n<o?"asc"===a?-1:1:n>o?"asc"===a?1:-1:0})}getFilterValues(){const e={};return(s.J[this.sectionKey]||[]).forEach(t=>{if("component"===t.type)return;const a=document.getElementById(t.id);a&&(e[t.id]="checkbox"===a.type?a.checked:a.value)}),e}toggleSection(){var e;null===(e=this.elements.wrapper)||void 0===e||e.classList.toggle("show"),this.elements.toggleBtn.textContent=this.elements.wrapper.classList.contains("show")?"Recolher":"Expandir"}toggleMoreFilters(){const e=!this.elements.moreFilters.classList.contains("show");this.elements.moreFilters.classList.toggle("show",e),this.elements.toggleMoreBtn.querySelector(".button-text").textContent=e?"Menos filtros":"Mais filtros",this.updateActiveFiltersIndicator()}clearFilters(e=!0){const t=this.globalSettings.filterLayout[this.sectionKey]||[],a=new Map(t.map(e=>[e.id,e])),n=this.globalSettings.userPreferences.dateRangeDefaults[this.sectionKey]||{consultations:{start:-6,end:0},exams:{start:-6,end:0},appointments:{start:-1,end:3},regulations:{start:-12,end:0},documents:{start:-24,end:0}}[this.sectionKey];this.elements.dateInitial&&(this.elements.dateInitial.valueAsDate=i.Z9(n.start)),this.elements.dateFinal&&(this.elements.dateFinal.valueAsDate=i.Z9(n.end)),(s.J[this.sectionKey]||[]).forEach(e=>{if("component"===e.type)return;const t=document.getElementById(e.id);if(t){const n=a.get(e.id);let i;var s;if(n&&void 0!==n.defaultValue)i=n.defaultValue;else i=null!==(s=e.defaultChecked)&&void 0!==s?s:e.options?e.options[0].value:"";"checkbox"===t.type?t.checked=i:t.value=i,t.classList.contains("filter-select-group")&&this.handleFetchTypeChange(t)}}),e&&this.applyFiltersAndRender()}handleSort(e){this.sortState.key===e?this.sortState.order="asc"===this.sortState.order?"desc":"asc":(this.sortState.key=e,this.sortState.order="desc"),this.applyFiltersAndRender()}handleFetchTypeChange(e){this.fetchType=e.value||e.dataset.fetchType,this.fetchData()}updateActiveFiltersIndicator(){var e;const t=null===(e=this.elements.toggleMoreBtn)||void 0===e?void 0:e.querySelector("span:not(.button-text)");if(!t||!this.elements.moreFilters)return;const a=this.elements.moreFilters.classList.contains("show");let s=0;this.elements.moreFilters.querySelectorAll("input, select").forEach(e=>{"select-one"!==e.type&&"select"!==e.type||"todos"===e.value||"todas"===e.value||""===e.value||"all"===e.value?("text"===e.type&&""!==e.value.trim()||"checkbox"===e.type&&e.checked)&&s++:s++}),s>0&&!a?(t.textContent=s,t.classList.remove("hidden")):t.classList.add("hidden")}saveFilterSet(){const e=window.prompt("Digite um nome para o conjunto de filtros:");if(!e||""===e.trim())return void i.rG("Nome inválido. O filtro não foi salvo.");const t=n.M.getSavedFilterSets();t[this.sectionKey]||(t[this.sectionKey]=[]);const a=t[this.sectionKey].findIndex(t=>t.name===e),s=this.getFilterValues(),o={name:e,values:s};a>-1?t[this.sectionKey][a]=o:t[this.sectionKey].push(o),browser.storage.local.set({savedFilterSets:t}),n.M.setSavedFilterSets(t),i.rG(`Filtro "${e}" salvo com sucesso.`,"success")}loadFilterSet(){const e=document.getElementById(`${this.prefix}-saved-filters-select`).value;if(!e)return;const t=(n.M.getSavedFilterSets()[this.sectionKey]||[]).find(t=>t.name===e);t&&(Object.entries(t.values).forEach(([e,t])=>{const a=document.getElementById(e);a&&("checkbox"===a.type?a.checked=t:a.value=t,a.classList.contains("filter-select-group")&&this.handleFetchTypeChange(a))}),this.applyFiltersAndRender())}deleteFilterSet(){const e=document.getElementById(`${this.prefix}-saved-filters-select`).value;if(!e)return void i.rG("Selecione um filtro para apagar.");if(!window.confirm(`Tem certeza que deseja apagar o filtro "${e}"?`))return;const t=n.M.getSavedFilterSets();t[this.sectionKey]=(t[this.sectionKey]||[]).filter(t=>t.name!==e),browser.storage.local.set({savedFilterSets:t}),n.M.setSavedFilterSets(t),i.rG(`Filtro "${e}" apagado.`,"success")}populateSavedFilterDropdown(){const e=document.getElementById(`${this.prefix}-saved-filters-select`);if(!e)return;const t=e.value;e.innerHTML='<option value="">Carregar filtro...</option>';(n.M.getSavedFilterSets()[this.sectionKey]||[]).forEach(t=>{const a=document.createElement("option");a.value=t.name,a.textContent=t.name,e.appendChild(a)}),e.value=t}renderFilterControls(){try{const e=s.J[this.sectionKey]||[],t=this.globalSettings.filterLayout[this.sectionKey]||[],a=new Map(t.map(e=>[e.id,e])),n=[...e].sort((e,t)=>{var s,n,i,o;return(null!==(s=null===(n=a.get(e.id))||void 0===n?void 0:n.order)&&void 0!==s?s:1/0)-(null!==(i=null===(o=a.get(t.id))||void 0===o?void 0:o.order)&&void 0!==i?i:1/0)});this.elements.mainFilters&&(this.elements.mainFilters.innerHTML=""),this.elements.moreFilters&&(this.elements.moreFilters.innerHTML=""),n.forEach(e=>{var t;const s="main"===((null===(t=a.get(e.id))||void 0===t?void 0:t.location)||e.defaultLocation)?this.elements.mainFilters:this.elements.moreFilters;if(s){let t;t="component"===e.type?this.createUiComponent(e.componentName):this.createFilterElement(e),t&&s.appendChild(t)}})}catch(e){}}createUiComponent(e){switch(e){case"date-range":return this.renderDateRangeComponent();case"saved-filters":return this.renderSavedFiltersComponent();default:return null}}renderDateRangeComponent(){const e=document.createElement("div");return e.className="grid grid-cols-2 gap-4 text-sm",e.innerHTML=`\n        <div>\n            <label for="${this.prefix}-date-initial" class="block font-medium">Data Inicial</label>\n            <input type="date" id="${this.prefix}-date-initial" class="mt-1 w-full px-2 py-1 border border-slate-300 rounded-md"/>\n        </div>\n        <div>\n            <label for="${this.prefix}-date-final" class="block font-medium">Data Final</label>\n            <input type="date" id="${this.prefix}-date-final" class="mt-1 w-full px-2 py-1 border border-slate-300 rounded-md"/>\n        </div>\n      `,this.elements.dateInitial=e.querySelector(`#${this.prefix}-date-initial`),this.elements.dateFinal=e.querySelector(`#${this.prefix}-date-final`),e}renderSavedFiltersComponent(){const e=document.createElement("div");return e.className="mt-4 pt-4 border-t",e.id=`${this.prefix}-saved-filters-container`,e.innerHTML=`\n      <h3 class="text-sm font-semibold text-slate-600 mt-3 mb-2">Filtros Salvos</h3>\n      <div class="flex items-center gap-2">\n        <select id="${this.prefix}-saved-filters-select" class="flex-grow w-full px-2 py-1 border border-slate-300 rounded-md bg-white text-sm" title="Carregar um filtro salvo">\n          <option value="">Carregar filtro...</option>\n        </select>\n        <button id="${this.prefix}-saved-filters-load" class="px-2 py-1 bg-blue-500 text-white rounded-md text-sm">Carregar</button>\n        <button id="${this.prefix}-saved-filters-delete" class="px-2 py-1 bg-red-500 text-white rounded-md text-sm">Excluir</button>\n      </div>\n    `,e}applyAutomationFilters(e,t){if(e){if(e.dateRange){const{start:t,end:a}=e.dateRange;this.elements.dateInitial&&null!==t&&!isNaN(t)&&(this.elements.dateInitial.valueAsDate=i.Z9(t)),this.elements.dateFinal&&null!==a&&!isNaN(a)&&(this.elements.dateFinal.valueAsDate=i.Z9(a))}Object.entries(e).forEach(([e,t])=>{if("dateRange"===e)return;const a=document.getElementById(e);a&&("checkbox"===a.type?a.checked=t:a.value=t)}),this.fetchData(),this.elements.automationFeedback&&(this.elements.automationFeedback.innerHTML=`\n            <div class="flex justify-between items-center">\n                <span>Filtro automático aplicado: <strong>${t}</strong></span>\n                <button class="clear-automation-btn text-blue-800 hover:text-blue-900 font-bold" title="Limpar filtro automático">&times;</button>\n            </div>\n        `,this.elements.automationFeedback.classList.remove("hidden"))}}clearAutomationFeedbackAndFilters(e=!0){this.elements.automationFeedback&&!this.elements.automationFeedback.classList.contains("hidden")&&(this.elements.automationFeedback.classList.add("hidden"),this.elements.automationFeedback.innerHTML="",this.clearFilters(!1)),e&&this.applyFiltersAndRender()}}},574:(e,t,a)=>{a.d(t,{$4:()=>l,$_:()=>i,DM:()=>I,EI:()=>y,GP:()=>b,JA:()=>F,K4:()=>f,Ns:()=>w,P_:()=>C,Pn:()=>x,Sp:()=>v,Tp:()=>p,bW:()=>u,hr:()=>d,lQ:()=>$,pP:()=>L,v0:()=>E,wF:()=>g});var s=a(322);const n="undefined"!=typeof browser?browser:chrome;async function i(){let e;try{const t=(0,s.L9)();t.startPerformanceMark("getBaseUrl"),e=await n.storage.sync.get("baseUrl"),t.endPerformanceMark("getBaseUrl",s.Uu.STORAGE)}catch(t){throw(0,s.vV)("Erro ao obter a URL base do storage",{errorMessage:t.message},s.Uu.STORAGE),t}if(e&&e.baseUrl)return(0,s.fH)("URL base obtida com sucesso",null,s.Uu.STORAGE),e.baseUrl;throw(0,s.vV)("URL base não configurada",null,s.Uu.STORAGE),new Error("URL_BASE_NOT_CONFIGURED")}function o(e,t="API Call"){const a={status:e.status,statusText:e.statusText,url:e.url,operation:t};throw(0,s.vV)(`Erro na requisição: ${e.status} ${e.statusText}`,a,s.Uu.SIGSS_API),new Error("Falha na comunicação com o servidor.")}function r(e){if(!e)return"";return(new DOMParser).parseFromString(e,"text/html").body.textContent||""}async function l(){const e=await i(),t=new URL(`${e}/sigss/configuracaoGravidade/loadConfiguracaoRegra`);try{const e=await fetch(t);if(!e.ok)return[];return(await e.json()).filter(e=>"t"===e.coreIsAtivo).sort((e,t)=>e.coreOrdemExibicao-t.coreOrdemExibicao)}catch(a){return[]}}async function d({reguIdp:e,reguIds:t}){if(!e||!t)throw(0,s.vV)("IDs da regulação são necessários",{reguIdp:e,reguIds:t},s.Uu.SIGSS_API),new Error("IDs da regulação são necessários.");try{const a=(0,s.L9)();a.startPerformanceMark("fetchRegulationDetails"),(0,s.fH)("Iniciando busca de detalhes da regulação",{reguIdp:e,reguIds:t},s.Uu.SIGSS_API);const n=await i(),r=new URL(`${n}/sigss/regulacaoControleSolicitacao/visualiza`);r.search=new URLSearchParams({"reguPK.idp":e,"reguPK.ids":t}).toString();const l=await fetch(r,{method:"GET",headers:{Accept:"application/json, text/javascript, */*; q=0.01","X-Requested-With":"XMLHttpRequest"}});if(!l.ok)return o(l,"fetchRegulationDetails"),null;let d=null;const c=l.headers.get("content-type");if(!c||!c.includes("application/json"))throw(0,s.vV)("Resposta do servidor não foi JSON",{contentType:c},s.Uu.SIGSS_API),new Error("A resposta do servidor não foi JSON. A sessão pode ter expirado.");d=(await l.json()).regulacao||null;return a.endPerformanceMark("fetchRegulationDetails",s.Uu.SIGSS_API),(0,s.fH)("Detalhes da regulação obtidos com sucesso",{reguIdp:e,reguIds:t,hasResult:!!d},s.Uu.SIGSS_API),async function({reguIdp:e,reguIds:t}){if(!e||!t)return!1;try{const a=await i(),s=new URL(`${a}/sigss/regulacao/limparLock`),n=`${e}-${t}`;return!!(await fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json, text/javascript, */*; q=0.01","X-Requested-With":"XMLHttpRequest"},body:`lock=${n}`})).ok}catch(a){return!1}}({reguIdp:e,reguIds:t}).catch(a=>(0,s.FF)("Erro ao limpar lock após buscar detalhes",{errorMessage:a.message,reguIdp:e,reguIds:t},s.Uu.SIGSS_API)),d}catch(a){throw(0,s.vV)("Falha ao buscar detalhes da regulação",{errorMessage:a.message,reguIdp:e,reguIds:t},s.Uu.SIGSS_API),a}}function c(e){const t=(new DOMParser).parseFromString(e,"text/html"),a=Array.from(t.querySelectorAll("tbody > tr")),s=[],n=e=>{if(!e)return"";const t=e.cloneNode(!0);return t.querySelectorAll("br").forEach(e=>e.parentNode.replaceChild(document.createTextNode("\n"),e)),t.textContent||""},i=e=>{const t=(e.split("\n").find(e=>e.startsWith("At"))||e).replace("At","").trim().match(/(\d{2})\/(\d{2})\/(\d{4})(?: (\d{2}):(\d{2}):(\d{2}))?/);if(!t)return null;const[,a,s,n,i=0,o=0,r=0]=t;return new Date(n,s-1,a,i,o,r)};let o=0;for(;o<a.length;){const e=a[o],t=e.querySelectorAll("td");if(t.length<5||!t[0].className.includes("width10")){o++;continue}const r=t[1].textContent.trim().replace(/\s+/g," "),l={priority:t[0].textContent.trim(),date:r.replace("At","\nAt"),sortableDate:i(r),unit:t[2].textContent.trim(),specialty:t[3].textContent.trim(),professional:t[4].textContent.trim().replace(/Insc\.: \d+/,"").trim(),details:[],isNoShow:e.textContent.includes("FALTOU A CONSULTA")};let d=a.findIndex((e,t)=>t>o&&e.querySelectorAll("td").length>5&&e.querySelectorAll("td")[0].className.includes("width10"));-1===d&&(d=a.length);const c=a.slice(o+1,d);if(c.some(e=>e.textContent.includes("SOAP -"))){["SUBJETIVO","OBJETIVO","AVALIAÇÃO","PLANO"].forEach(e=>{const t=c.findIndex(t=>t.textContent.includes(`SOAP - ${e}`));if(-1===t)return;let a="",s="",i="";const o=c.findIndex((e,a)=>a>t&&e.textContent.includes("SOAP -"));c.slice(t+1,-1!==o?o:c.length).forEach(e=>{const t=Array.from(e.querySelectorAll("td")).find(e=>e.textContent.includes("CID -")||e.textContent.includes("CIAP -"));t&&(s=t.textContent.trim(),t.nextElementSibling&&(s+=` - ${t.nextElementSibling.textContent.trim()}`));const o=e.querySelector(".divHpdnObs");o&&(a+=n(o));const r=Array.from(e.querySelectorAll("td")).find(e=>e.textContent.trim().startsWith("OBS./NOTA:"));r&&(i=r.textContent.replace("OBS./NOTA:","").trim())});let r="";s&&(r+=s.trim()),i&&(r+=(r?"\n":"")+`Obs.: ${i.trim()}`),a&&(r+=(r?"\n":"")+`Descrição: ${a.trim()}`),r.trim()&&l.details.push({label:e,value:r})})}else c.forEach(e=>{const t=Array.from(e.querySelectorAll("td")).find(e=>e.textContent.includes("CID -"));if(t){const e=t.nextElementSibling;e&&l.details.push({label:"Hipótese Diagnóstica",value:`${t.textContent.trim()} - ${e.textContent.trim()}`})}const a=e.textContent.trim();if(a.includes("DESCRIÇÃO DA CONSULTA")){const t=e.nextElementSibling,a=null==t?void 0:t.querySelector(".divHpdnObs");a&&l.details.push({label:"Descrição da Consulta",value:n(a).trim()})}if(a.includes("OBSERVAÇÃO DE ENFERMAGEM:")){const t=e.querySelector("td[colspan]");t&&l.details.push({label:"Observação de Enfermagem",value:n(t).replace("OBSERVAÇÃO DE ENFERMAGEM:","").trim()})}});s.push(l),o=d}return s}async function u(e){if(!e||e.length<1)return[];const t=await i(),a=new URL(`${t}/sigss/usuarioServico/busca`);a.search=new URLSearchParams({searchString:e});const s=await fetch(a,{headers:{Accept:"application/json, text/javascript, */*; q=0.01","X-Requested-With":"XMLHttpRequest"}});s.ok||o(s);const n=await s.json();return Array.isArray(n)?n.map(e=>({idp:e[0],ids:e[1],value:e[5],cns:e[6],dataNascimento:e[7],cpf:e[15]})):[]}async function p({idp:e,ids:t}){if(!e||!t)throw new Error(`ID inválido. idp: '${e}', ids: '${t}'.`);const a=`${await i()}/sigss/usuarioServico/visualiza`,s=`isenPK.idp=${encodeURIComponent(e)}&isenPK.ids=${encodeURIComponent(t)}`,n=await fetch(a,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest",Accept:"application/json, text/javascript, */*; q=0.01"},body:s});n.ok||o(n);const r=n.headers.get("content-type");if(r&&-1!==r.indexOf("application/json")){const e=await n.json();return(null==e?void 0:e.usuarioServico)||{}}throw new Error("A sessão pode ter expirado. Por favor, faça login no sistema novamente.")}async function m({isenFullPKCrypto:e,dataInicial:t,dataFinal:a}){if(!e)throw new Error("ID criptografado necessário.");const s=await i(),n=new URL(`${s}/sigss/prontuarioAmbulatorial2/buscaDadosConsultaEspecializadas_HTML`);n.search=new URLSearchParams({isenFullPKCrypto:e,dataInicial:t,dataFinal:a});const r=await fetch(n,{headers:{Accept:"application/json, text/javascript, */*; q=0.01","X-Requested-With":"XMLHttpRequest"}});r.ok||o(r);const l=await r.json();return{htmlData:(null==l?void 0:l.tabela)||"",jsonData:c((null==l?void 0:l.tabela)||"")}}async function h({isenFullPKCrypto:e,dataInicial:t,dataFinal:a}){if(!e)throw new Error("ID criptografado necessário.");const s=await i(),n=new URL(`${s}/sigss/prontuarioAmbulatorial2/buscaDadosConsulta_HTML`);n.search=new URLSearchParams({isenFullPKCrypto:e,dataInicial:t,dataFinal:a});const r=await fetch(n,{headers:{Accept:"application/json, text/javascript, */*; q=0.01","X-Requested-With":"XMLHttpRequest"}});r.ok||o(r);const l=await r.json();return{htmlData:(null==l?void 0:l.tabela)||"",jsonData:c((null==l?void 0:l.tabela)||"")}}async function g({isenFullPKCrypto:e,dataInicial:t,dataFinal:a}){const[s,n]=await Promise.all([h({isenFullPKCrypto:e,dataInicial:t,dataFinal:a}),m({isenFullPKCrypto:e,dataInicial:t,dataFinal:a})]);return{jsonData:[...s.jsonData,...n.jsonData],htmlData:`<h3>Consultas Básicas</h3>${s.htmlData}<h3>Consultas Especializadas</h3>${n.htmlData}`}}async function f({isenPK:e,dataInicial:t,dataFinal:a,comResultado:s,semResultado:n}){if(!e)throw new Error("ID (isenPK) do paciente é necessário.");const r=await i(),l=new URL(`${r}/sigss/exameRequisitado/findAllReex`),d={"filters[0]":`dataInicial:${t}`,"filters[1]":`dataFinal:${a}`,"filters[2]":`isenPK:${e}`,exameSolicitadoMin:"true",exameSolicitadoOutro:"true",exameComResultado:s,exameSemResultado:n,tipoBusca:"reex",_search:"false",nd:Date.now(),rows:"1000",page:"1",sidx:"reex.reexData",sord:"asc"};l.search=new URLSearchParams(d).toString();const c=await fetch(l,{headers:{Accept:"application/json, text/javascript, */*; q=0.01","X-Requested-With":"XMLHttpRequest"}});c.ok||o(c);const u=await c.json();return((null==u?void 0:u.rows)||[]).map(e=>{const t=e.cell||[];return{id:e.id||"",date:t[2]||"",examName:(t[5]||"").trim(),hasResult:"SIM"===(t[6]||""),professional:t[8]||"",specialty:t[9]||"",resultIdp:null!=t[13]?String(t[13]):"",resultIds:null!=t[14]?String(t[14]):""}})}async function v({idp:e,ids:t}){if(!e||!t)throw new Error("IDs do resultado do exame são necessários.");const a=await i(),s=new URL(`${a}/sigss/resultadoExame/visualizaImagem`);s.search=new URLSearchParams({"iterPK.idp":e,"iterPK.ids":t}).toString();const n=await fetch(s,{headers:{Accept:"application/json, text/javascript, */*; q=0.01","X-Requested-With":"XMLHttpRequest"}});n.ok||o(n);const r=await n.json();return(null==r?void 0:r.path)||null}async function b({cpf:e,cns:t}){if(!e&&!t)return null;const a=await i(),s=new URL(`${a}/sigss/usuarioServicoConsultaPDQ/consultarPaciente`),n=new URLSearchParams({_search:"false",rows:"50",page:"1",sidx:"nome",sord:"asc","pdq.cartaoNacionalSus":"","pdq.cpf":"","pdq.rg":"","pdq.nome":"","pdq.dataNascimento":"","pdq.sexo":"","pdq.nomeMae":""});if(e){const t=String(e).replace(/\D/g,"").replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4");n.set("pdq.cpf",t)}else t&&n.set("pdq.cartaoNacionalSus",t);s.search=n.toString();const o=await fetch(s,{headers:{Accept:"application/json, text/javascript, */*; q=0.01","X-Requested-With":"XMLHttpRequest"}});if(!o.ok)return null;const r=await o.json();return r&&r.rows&&r.rows.length>0?r.rows[0].cell:null}async function y({idp:e,ids:t}){if(!e||!t)throw new Error("ID do agendamento é necessário.");const a=await i(),s=new URL(`${a}/sigss/agendamentoConsulta/visualiza`);s.search=new URLSearchParams({"agcoPK.idp":e,"agcoPK.ids":t}).toString();const n=await fetch(s,{headers:{Accept:"application/json, text/javascript, */*; q=0.01","X-Requested-With":"XMLHttpRequest"}});if(!n.ok)return null;const o=await n.json();return(null==o?void 0:o.agendamentoConsulta)||null}async function x({idp:e,ids:t}){if(!e||!t)throw new Error("ID do agendamento de exame é necessário.");const a=await i(),s=new URL(`${a}/sigss/agendamentoExame/visualizar`);s.search=new URLSearchParams({"examPK.idp":e,"examPK.ids":t}).toString();const n=await fetch(s,{headers:{Accept:"application/json, text/javascript, */*; q=0.01","X-Requested-With":"XMLHttpRequest"}});if(!n.ok)return o(n),null;const r=await n.json();return(null==r?void 0:r.agendamentoExame)||null}async function w({isenPK:e,dataInicial:t,dataFinal:a}){if(!e)throw new Error("ID (isenPK) do paciente é necessário.");const s=await i(),n=new URL(`${s}/sigss/resumoCompromisso/lista`),r={isenPK:e,dataInicial:t,dataFinal:a,_search:"false",nd:Date.now(),rows:"1000",page:"1",sidx:"data",sord:"desc"};n.search=new URLSearchParams(r).toString();const l=await fetch(n,{headers:{Accept:"application/json, text/javascript, */*; q=0.01","X-Requested-With":"XMLHttpRequest"}});l.ok||o(l);const d=await l.json(),c=((null==d?void 0:d.rows)||[]).map(e=>{const t=e.cell||[];let a="AGENDADO";return String(t[10]).includes("red")?a="FALTOU":String(t[7]).includes("blue")?a="PRESENTE":String(t[8]).includes("red")?a="CANCELADO":String(t[11]).includes("blue")&&(a="ATENDIDO"),{id:e.id||"",type:t[1]||"N/A",date:t[2]||"",time:t[3]||"",location:t[4]||"",professional:t[5]||"",description:(t[6]||"").trim(),status:a}}),u=[];for(let i=0;i<c.length;i+=10){const e=c.slice(i,i+10).map(async e=>{if(e.type.toUpperCase().includes("EXAME"))return{...e,specialty:e.description||"Exame sem descrição"};const[t,a]=e.id.split("-");if(!t||!a)return e;try{const s=await y({idp:t,ids:a});if(s){let t="Sem especialidade";const a=s.atividadeProfissionalCnes;return a&&a.apcnNome&&(t=a.apcnCod?`${a.apcnNome} (${a.apcnCod})`:a.apcnNome),{...e,isSpecialized:"t"===s.agcoIsEspecializada,isOdonto:"t"===s.agcoIsOdonto,specialty:t}}}catch(s){}return e}),t=await Promise.all(e);u.push(...t)}return u}async function S({isenPK:e,modalidade:t,dataInicial:a,dataFinal:s}){if(!e)throw new Error("ID (isenPK) do paciente é necessário.");const n=await i(),l=new URL(`${n}/sigss/regulacaoRegulador/lista`),d={"filters[0]":`isFiltrarData:${!!a}`,"filters[1]":`dataInicial:${a||""}`,"filters[2]":`dataFinal:${s||""}`,"filters[3]":`modalidade:${t}`,"filters[4]":"solicitante:undefined","filters[5]":`usuarioServico:${e}`,"filters[6]":"autorizado:true","filters[7]":"pendente:true","filters[8]":"devolvido:true","filters[9]":"negado:true","filters[10]":"emAnalise:true","filters[11]":"cancelados:true","filters[12]":"cboFiltro:","filters[13]":"procedimentoFiltro:","filters[14]":"reguGravidade:","filters[15]":"reguIsRetorno:...","filters[16]":"codBarProtocolo:","filters[17]":"reguIsAgendadoFiltro:todos",_search:"false",nd:Date.now(),rows:"1000",page:"1",sidx:"regu.reguDataPrevista",sord:"desc"};l.search=new URLSearchParams(d).toString();const c=await fetch(l,{headers:{Accept:"application/json, text/javascript, */*; q=0.01","X-Requested-With":"XMLHttpRequest"}});c.ok||o(c);const u=await c.json();return((null==u?void 0:u.rows)||[]).map(e=>{const t=e.cell||[];let a=null,s=null;const n=(e.id||"").match(/reguPK(\d+)-(\d+)/);n&&3===n.length&&(a=n[1],s=n[2]);const i=t[6]||"",[o,l]=i.split("<br/>");return{id:e.id,idp:a,ids:s,type:t[2]||"N/A",priority:r(t[3]),date:t[4]||"",status:r(t[5]),procedure:r(o),cid:l?l.trim():"",requester:t[7]||"",provider:t[8]||"",isenFullPKCrypto:t[9]||""}})}async function E({isenPK:e,dataInicial:t,dataFinal:a,type:s="all"}){let n=[];"all"===s?n=await Promise.all([S({isenPK:e,modalidade:"ENC",dataInicial:t,dataFinal:a}),S({isenPK:e,modalidade:"EXA",dataInicial:t,dataFinal:a})]):"ENC"===s?n=[await S({isenPK:e,modalidade:"ENC",dataInicial:t,dataFinal:a})]:"EXA"===s&&(n=[await S({isenPK:e,modalidade:"EXA",dataInicial:t,dataFinal:a})]);const r=n.flat(),l=await Promise.all(r.map(async e=>{if(e.idp&&e.ids)try{const t=`${e.idp}-${e.ids}`,a=await async function({reguIdp:e,reguIds:t,isenPK:a}){if(!e||!t)throw new Error("ID da regulação é necessário.");if(!a)throw new Error("ID do paciente (isenPK) é necessário.");const[s,n]=a.split("-");if(!s||!n)throw new Error("ID do paciente (isenPK) em formato inválido.");const r=await i(),l=new URL(`${r}/sigss/rear/buscaGrid`),d={"isenPK.idp":s,"isenPK.ids":n,"reguPK.idp":e,"reguPK.ids":t,_search:"false",nd:Date.now(),rows:"999",page:"1",sidx:"",sord:"asc"};l.search=new URLSearchParams(d).toString();const c=await fetch(l,{headers:{Accept:"application/json, text/javascript, */*; q=0.01","X-Requested-With":"XMLHttpRequest"}});c.ok||o(c);const u=await c.json();return((null==u?void 0:u.rows)||[]).map(e=>{const t=e.cell||[];return{idp:t[0],ids:t[1],date:t[2]||"",description:(t[3]||"").trim(),fileType:(t[4]||"").toLowerCase()}})}({reguIdp:e.idp,reguIds:e.ids,isenPK:t});return{...e,attachments:a}}catch(t){return{...e,attachments:[]}}return{...e,attachments:[]}}));return l.sort((e,t)=>{const a=e.date.split("/").reverse().join("-"),s=t.date.split("/").reverse().join("-");return new Date(s)-new Date(a)}),l}async function C({isenPK:e}){if(!e)throw new Error("ID (isenPK) do paciente é necessário.");const[t,a]=e.split("-");if(!t||!a)throw new Error("ID (isenPK) do paciente em formato inválido.");const s=await i(),n=new URL(`${s}/sigss/isar/buscaGrid`),r={"isenPK.idp":t,"isenPK.ids":a,_search:"false",nd:Date.now(),rows:"999",page:"1",sidx:"isar.isarData desc, isar.isarPK.idp",sord:"desc"};n.search=new URLSearchParams(r).toString();const l=await fetch(n,{headers:{Accept:"application/json, text/javascript, */*; q=0.01","X-Requested-With":"XMLHttpRequest"}});l.ok||o(l);const d=await l.json();return((null==d?void 0:d.rows)||[]).map(e=>{const t=e.cell||[];return{idp:t[0],ids:t[1],date:t[2]||"",description:(t[3]||"").trim(),fileType:(t[4]||"").toLowerCase()}})}async function L({idp:e,ids:t}){var a;if(!e||!t)throw new Error("IDs do documento são necessários.");const s=await i(),n=new URL(`${s}/sigss/isar/getHashArquivo`);n.search=new URLSearchParams({"isarPK.idp":e,"isarPK.ids":t}).toString();const r=await fetch(n,{headers:{Accept:"application/json, text/javascript, */*; q=0.01","X-Requested-With":"XMLHttpRequest"}});r.ok||o(r);const l=await r.json();if(null!=l&&null!==(a=l.isenArquivo)&&void 0!==a&&a.img){const e=l.isenArquivo.img;return e.startsWith("http")?e:`${s}${e}`}return null}async function I({idp:e,ids:t}){var a;if(!e||!t)throw new Error("IDs do anexo são necessários.");const s=await i(),n=new URL(`${s}/sigss/rear/getHashArquivo`);n.search=new URLSearchParams({"rearPK.idp":e,"rearPK.ids":t}).toString();const r=await fetch(n,{headers:{Accept:"application/json, text/javascript, */*; q=0.01","X-Requested-With":"XMLHttpRequest"}});r.ok||o(r);const l=await r.json();if(null!=l&&null!==(a=l.regulacaoArquivo)&&void 0!==a&&a.img){const e=l.regulacaoArquivo.img;return e.startsWith("http")?e:`${s}${e}`}return null}async function $({isenPK:e,isenFullPKCrypto:t,dataInicial:a,dataFinal:s}){const n={consultations:g({isenFullPKCrypto:t,dataInicial:a,dataFinal:s}),exams:f({isenPK:e,dataInicial:a,dataFinal:s,comResultado:!0,semResultado:!0}),appointments:w({isenPK:e,dataInicial:a,dataFinal:s}),regulations:E({isenPK:e,dataInicial:a,dataFinal:s,type:"all"}),documents:C({isenPK:e})},i=await Promise.allSettled(Object.values(n)),o=Object.keys(n),r={};return o.forEach((e,t)=>{r[e]=((e,t=[])=>"fulfilled"===e.status?e.value&&void 0!==e.value.jsonData?e.value.jsonData:e.value:t)(i[t])}),r}async function F(){try{const e=await i(),t=new URL(`${e}/sigss/common/dataHora`),a=await fetch(t,{method:"GET",headers:{Accept:"application/json, text/javascript, */*; q=0.01","X-Requested-With":"XMLHttpRequest"}});if(!a.ok)return!1;await a.json();return!0}catch(e){return!1}}},690:(e,t,a)=>{a.d(t,{IC:()=>l,Rb:()=>o,lT:()=>r,rX:()=>i,s8:()=>c,zL:()=>d});var s=a(338);if(61==a.j)var n=a(239);function i(e,t){const a=document.getElementById("consultations-content");if(!a)return;if(0===e.length)return void(a.innerHTML='<p class="text-slate-500">Nenhuma consulta encontrada para os filtros aplicados.</p>');const n=`\n    <div class="flex justify-between text-xs font-bold text-slate-500 mb-2 px-3">\n        <span class="sort-header w-2/3" data-sort-key="specialty">Especialidade/Profissional <span class="sort-indicator">${(0,s.Q)("specialty",t)}</span></span>\n        <span class="sort-header w-1/3 text-right" data-sort-key="sortableDate">Data <span class="sort-indicator">${(0,s.Q)("sortableDate",t)}</span></span>\n    </div>\n  `;a.innerHTML=n+e.map(e=>`\n        <div class="p-3 mb-3 border rounded-lg ${e.isNoShow?"bg-red-50 border-red-200":"bg-white"} consultation-item">\n            <div class="flex justify-between items-start cursor-pointer consultation-header">\n                <div>\n                    <p class="font-bold text-blue-700 pointer-events-none">${e.specialty}</p>\n                    <p class="text-sm text-slate-600 pointer-events-none">${e.professional}</p>\n                </div>\n                <p class="text-sm font-medium text-slate-800 bg-slate-100 px-2 py-1 rounded whitespace-pre-wrap text-right pointer-events-none">${e.date.replace(/\n/g,"<br>")}</p>\n            </div>\n            <div class="consultation-body collapse-section show">\n                ${e.isNoShow?'<p class="text-center font-bold text-red-600 mt-2">PACIENTE FALTOU</p>':`\n                <p class="text-sm text-slate-500 mt-1">${e.unit}</p>\n                <div class="mt-3 pt-3 border-t border-slate-200 space-y-2">\n                    ${e.details.map(e=>`<p class="text-xs font-semibold text-slate-500 uppercase">${e.label}</p><p class="text-sm text-slate-700 whitespace-pre-wrap">${e.value.replace(/\n/g,"<br>")} <span class="copy-icon" title="Copiar" data-copy-text="${e.value}">📄</span></p>`).join("")}\n                </div>`}\n            </div>\n        </div>\n    `).join("")}function o(e,t){const a=document.getElementById("exams-content");if(!a)return;if(0===e.length)return void(a.innerHTML='<p class="text-slate-500">Nenhum exame encontrado para os filtros aplicados.</p>');const n=`\n    <div class="flex justify-between text-xs font-bold text-slate-500 mb-2 px-3">\n        <span class="sort-header w-2/3" data-sort-key="examName">Nome do Exame <span class="sort-indicator">${(0,s.Q)("examName",t)}</span></span>\n        <span class="sort-header w-1/3 text-right" data-sort-key="date">Data <span class="sort-indicator">${(0,s.Q)("date",t)}</span></span>\n    </div>\n  `;a.innerHTML=n+e.map(e=>{const t=e.resultIdp,a=e.resultIds,s=null!=t?String(t):"",n=null!=a?String(a):"",i=e.hasResult&&null!=t&&null!=a&&""!==s&&""!==n;return`\n        <div class="p-3 mb-3 border rounded-lg bg-white">\n            <p class="font-semibold text-indigo-700">${e.examName||"Nome do exame não informado"} <span class="copy-icon" title="Copiar" data-copy-text="${e.examName}">📄</span></p>\n            <div class="text-sm text-slate-500 mt-1">\n                <p>Solicitado por: ${e.professional||"Não informado"} (${e.specialty||"N/A"})</p>\n                <p>Data: ${e.date||"Não informada"}</p>\n            </div>\n            ${i?`<button class="view-exam-result-btn mt-2 w-full text-sm bg-green-100 text-green-800 py-1 rounded hover:bg-green-200" data-idp="${s}" data-ids="${n}">Visualizar Resultado</button>`:""}\n        </div>\n      `}).join("")}function r(e,t){const a=document.getElementById("appointments-content");if(!a)return;const n={AGENDADO:"bg-blue-100 text-blue-800",PRESENTE:"bg-green-100 text-green-800",FALTOU:"bg-red-100 text-red-800",CANCELADO:"bg-yellow-100 text-yellow-800",ATENDIDO:"bg-purple-100 text-purple-800"};if(0===e.length)return void(a.innerHTML='<p class="text-slate-500">Nenhum agendamento encontrado para o filtro selecionado.</p>');const i=`\n    <div class="flex justify-between text-xs font-bold text-slate-500 mb-2 px-3">\n        <span class="sort-header w-1/2" data-sort-key="specialty">Especialidade <span class="sort-indicator">${(0,s.Q)("specialty",t)}</span></span>\n        <span class="sort-header w-1/4 text-center" data-sort-key="status">Status <span class="sort-indicator">${(0,s.Q)("status",t)}</span></span>\n        <span class="sort-header w-1/4 text-right" data-sort-key="date">Data <span class="sort-indicator">${(0,s.Q)("date",t)}</span></span>\n    </div>\n  `;a.innerHTML=i+e.map(e=>{const t=n[e.status]||"bg-gray-100 text-gray-800";let a=e.type;e.isSpecialized?a="CONSULTA ESPECIALIZADA":e.isOdonto?a="CONSULTA ODONTO":e.type.toUpperCase().includes("EXAME")&&(a="EXAME");const[s,i]=e.id.split("-");return`\n        <div class="p-3 mb-3 border rounded-lg bg-white">\n            <div class="flex justify-between items-start">\n                <div>\n                    <p class="font-semibold text-gray-800">${a}</p>\n                    <p class="text-sm text-indigo-600 font-medium">${e.specialty||"Sem especialidade"}</p>\n                </div>\n                <span class="text-xs font-bold px-2 py-1 rounded-full ${t}">${e.status}</span>\n            </div>\n            <div class="text-sm text-slate-500 mt-2 border-t pt-2">\n                <p><strong>Data:</strong> ${e.date} às ${e.time}</p>\n                <p><strong>Local:</strong> ${e.location}</p>\n                <p><strong>Profissional:</strong> ${e.professional}</p>\n            </div>\n            <div class="flex items-center justify-between mt-2 pt-2 border-t">\n                 <button class="view-appointment-details-btn text-sm bg-gray-100 text-gray-800 py-1 px-3 rounded hover:bg-gray-200" data-idp="${s||""}" data-ids="${i||""}" data-type="${e.type}">\n                    Ver Detalhes\n                </button>\n            </div>\n        </div>\n      `}).join("")}function l(e,t,a){const i=document.getElementById("regulations-content");if(!i)return;const o=new Map,r=new Map;a&&a.regulationPriorities&&a.regulationPriorities.forEach(e=>{o.set(e.coreDescricao,e.coreDescricao),r.set(e.coreDescricao,e.coreCor)});const l={AUTORIZADO:"bg-green-100 text-green-800",PENDENTE:"bg-yellow-100 text-yellow-800",NEGADO:"bg-red-100 text-red-800",DEVOLVIDO:"bg-orange-100 text-orange-800",CANCELADA:"bg-gray-100 text-gray-800","EM ANÁLISE":"bg-blue-100 text-blue-800"};if(0===e.length)return void(i.innerHTML='<p class="text-slate-500">Nenhum resultado encontrado para os filtros aplicados.</p>');const d=`\n    <div class="flex justify-between text-xs font-bold text-slate-500 mb-2 px-3">\n        <span class="sort-header w-1/2" data-sort-key="procedure">Procedimento <span class="sort-indicator">${(0,s.Q)("procedure",t)}</span></span>\n        <span class="sort-header w-1/4 text-center" data-sort-key="status">Status <span class="sort-indicator">${(0,s.Q)("status",t)}</span></span>\n        <span class="sort-header w-1/4 text-right" data-sort-key="date">Data <span class="sort-indicator">${(0,s.Q)("date",t)}</span></span>\n    </div>\n  `;i.innerHTML=d+e.map(e=>{const t=(e.status||"").toUpperCase(),a=l[t]||"bg-gray-100 text-gray-800",s=(e.priority||"").toUpperCase(),i=r.get(s)||"CCCCCC",d=`background-color: #${i}; color: ${n.Eg(i)};`,c=o.get(s)||e.priority,u=(e.type||"").startsWith("CON")?"CONSULTA":"EXAME",p="CONSULTA"===u?"text-cyan-700":"text-fuchsia-700",m=e.attachments&&e.attachments.length>0?`\n            <div class="mt-2 pt-2 border-t border-slate-100">\n                <p class="text-xs font-semibold text-slate-500 mb-1">ANEXOS:</p>\n                <div class="space-y-1">\n                    ${e.attachments.map(e=>`\n                        <button class="view-regulation-attachment-btn w-full text-left text-sm bg-gray-50 text-gray-700 py-1 px-2 rounded hover:bg-gray-100 flex justify-between items-center" data-idp="${e.idp}" data-ids="${e.ids}">\n                            <div class="flex items-center gap-2 overflow-hidden">\n                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="flex-shrink-0" viewBox="0 0 16 16"><path d="M4 0h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zM2 2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H2z"/><path d="M4.5 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-2a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-2a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5z"/></svg>\n                                <span class="truncate" title="${e.description} (${e.fileType.toUpperCase()})">${e.description} (${e.fileType.toUpperCase()})</span>\n                            </div>\n                            <span class="text-xs text-slate-400 flex-shrink-0 ml-2">${e.date}</span>\n                        </button>`).join("")}\n                </div>\n            </div>\n            `:"";return`\n            <div class="p-3 mb-3 border rounded-lg bg-white">\n                <div class="flex justify-between items-start">\n                    <div>\n                        <div class="flex items-center gap-2 mb-1">\n                           <p class="font-bold ${p}">${u}</p>\n                           <span class="text-xs font-bold px-2 py-0.5 rounded-full" style="${d}">${c}</span>\n                        </div>\n                        <p class="text-sm text-slate-800 font-medium">${e.procedure} <span class="copy-icon" title="Copiar" data-copy-text="${e.procedure}">📄</span></p>\n                        <p class="text-xs text-slate-500">${e.cid} <span class="copy-icon" title="Copiar" data-copy-text="${e.cid}">📄</span></p>\n                    </div>\n                    <span class="text-xs font-bold px-2 py-1 rounded-full ${a}">${e.status}</span>\n                </div>\n                <div class="text-sm text-slate-500 mt-2 border-t pt-2 space-y-1">\n                    <p><strong>Data:</strong> ${e.date}</p>\n                    <p><strong>Solicitante:</strong> ${e.requester}</p>\n                    <p><strong>Executante:</strong> ${e.provider||"Não definido"}</p>\n                </div>\n                <div class="mt-2 pt-2 border-t">\n                     <button class="view-regulation-details-btn w-full text-sm bg-gray-100 text-gray-800 py-1 px-3 rounded hover:bg-gray-200" data-idp="${e.idp}" data-ids="${e.ids}">\n                        Visualizar Detalhes\n                    </button>\n                </div>\n                ${m}\n            </div>\n      `}).join("")}function d(e,t){const a=document.getElementById("documents-content");if(!a)return;if(!e||0===e.length)return void(a.innerHTML='<p class="text-slate-500">Nenhum documento encontrado.</p>');const n=`\n    <div class="flex justify-between text-xs font-bold text-slate-500 mb-2 px-3">\n        <span class="sort-header w-2/3" data-sort-key="description">Descrição <span class="sort-indicator">${(0,s.Q)("description",t)}</span></span>\n        <span class="sort-header w-1/3 text-right" data-sort-key="date">Data <span class="sort-indicator">${(0,s.Q)("date",t)}</span></span>\n    </div>\n  `;a.innerHTML=n+e.map(e=>`\n        <div class="p-3 mb-2 border rounded-lg bg-white">\n            <p class="font-semibold text-gray-800">${e.description}</p>\n            <div class="text-sm text-slate-500 mt-1">\n                <span>Data: ${e.date}</span> |\n                <span class="font-medium">Tipo: ${e.fileType.toUpperCase()}</span>\n            </div>\n            <button class="view-document-btn mt-2 w-full text-sm bg-gray-100 text-gray-800 py-1 rounded hover:bg-gray-200" data-idp="${e.idp}" data-ids="${e.ids}">\n                Visualizar Documento\n            </button>\n        </div>\n      `).join("")}function c(e,t){const a=document.getElementById("timeline-content");if(!a)return;const s={consultation:{label:"Consulta",color:"blue",bgColorClass:"bg-blue-100",iconColorClass:"text-blue-600",icon:"M11 2v2M5 2v2M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1M8 15a6 6 0 0 0 12 0v-3m-6-5a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z"},exam:{label:"Exame",color:"green",bgColorClass:"bg-green-100",iconColorClass:"text-green-600",icon:"M6 18h8M3 22h18M14 22a7 7 0 1 0 0-14h-1M9 14h2M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2ZM12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3"},appointment:{label:"Agendamento",color:"purple",bgColorClass:"bg-purple-100",iconColorClass:"text-purple-600",icon:"M8 2v4M16 2v4M3 10h18M3 4h18v16H3zM9 16l2 2 4-4"},regulation:{label:"Regulação",color:"red",bgColorClass:"bg-red-100",iconColorClass:"text-red-600",icon:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1zM9 12l2 2 4-4"},document:{label:"Documento",color:"gray",bgColorClass:"bg-gray-100",iconColorClass:"text-gray-600",icon:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8Z M14 2v6h6"}};let n="";switch(t){case"loading":n='<p class="text-slate-500 text-center">A carregar linha do tempo...</p>';break;case"empty":n='<p class="text-slate-500 text-center">Nenhum evento encontrado para este paciente.</p>';break;case"error":n='<p class="text-red-500 text-center">Ocorreu um erro ao carregar os dados. Tente novamente.</p>';break;case"success":if(0===e.length){n='<p class="text-slate-500 text-center">Nenhum evento encontrado para os filtros aplicados.</p>';break}n='<div class="relative space-y-4">',n+='<div class="absolute left-4 top-2 bottom-2 w-0.5 bg-slate-200"></div>',n+=e.map(e=>{const t=s[e.type]||{label:"Evento",color:"gray",icon:""},a=e.date instanceof Date&&!isNaN(e.date)?e.date.toLocaleDateString("pt-BR"):"Data Inválida";let n="",i="";if("appointment"===e.type){const t=e.details,[a,s]=t.id.split("-"),i={AGENDADO:"text-blue-600",PRESENTE:"text-green-600",FALTOU:"text-red-600",CANCELADO:"text-yellow-600",ATENDIDO:"text-purple-600"}[t.status]||"text-slate-600",o='<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-search-2"><path d="M14 2v6h6"/><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"/><path d="M5 17a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/><path d="m9 21-1.5-1.5"/></svg>';n=`<div class="text-xs text-slate-500">às ${t.time}</div>`+`<div class="mt-1 text-xs font-semibold ${i}">${t.status}</div>`+`<button class="view-appointment-details-btn mt-2 text-xs bg-gray-100 text-gray-800 py-1 px-3 rounded hover:bg-gray-200 flex items-center gap-1" data-idp="${a}" data-ids="${s}" data-type="${t.type}">${o}<span>Detalhes</span></button>`}else if("exam"===e.type){const t=e.details.hasResult?"Com Resultado":"Sem Resultado";n=`<div class="mt-1 text-xs font-semibold ${e.details.hasResult?"text-green-600":"text-yellow-600"}">${t}</div>`,e.details.hasResult&&e.details.resultIdp&&e.details.resultIds&&(n+=`<button class="view-exam-result-btn mt-2 text-xs bg-green-100 text-green-800 py-1 px-3 rounded hover:bg-green-200" data-idp="${e.details.resultIdp}" data-ids="${e.details.resultIds}">Visualizar Resultado</button>`)}else if("regulation"===e.type){const t=e.details;if(t.idp&&t.ids){const e='<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-search-2"><path d="M14 2v6h6"/><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"/><path d="M5 17a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/><path d="m9 21-1.5-1.5"/></svg>';n=`<button class="view-regulation-details-btn mt-2 text-xs bg-gray-100 text-gray-800 py-1 px-3 rounded hover:bg-gray-200 flex items-center gap-1" data-idp="${t.idp}" data-ids="${t.ids}">${e}<span>Detalhes</span></button>`}}if("consultation"===e.type){const t=e.details;n=`<button class="timeline-toggle-details-btn mt-2 text-xs bg-gray-100 text-gray-800 py-1 px-3 rounded hover:bg-gray-200 flex items-center gap-1">${'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-search-2"><path d="M14 2v6h6"/><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"/><path d="M5 17a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/><path d="m9 21-1.5-1.5"/></svg>'}<span>Detalhes</span></button>`,i=`\n                <div class="timeline-details-body mt-2 pt-2 border-t border-slate-200">\n                    <p class="text-sm text-slate-500 mb-2">${t.unit}</p>\n                    ${t.details.map(e=>`\n                        <p class="text-xs font-semibold text-slate-500 uppercase mb-1">${e.label}</p>\n                        <p class="text-sm text-slate-700 mb-2">${e.value.replace(/\n/g,"<br>")} <span class="copy-icon" title="Copiar" data-copy-text="${e.value}">📄</span></p>\n                    `).join("")}\n                </div>\n            `}else if("regulation"===e.type){const t=e.details,a=t.attachments&&t.attachments.length>0?`\n                <div class="mt-2 pt-2 border-t border-slate-100">\n                    <p class="text-xs font-semibold text-slate-500 mb-1">ANEXOS:</p>\n                    <div class="space-y-1">\n                        ${t.attachments.map(e=>`\n                            <button class="view-regulation-attachment-btn w-full text-left text-sm bg-gray-50 text-gray-700 py-1 px-2 rounded hover:bg-gray-100 flex justify-between items-center" data-idp="${e.idp}" data-ids="${e.ids}">\n                                <div class="flex items-center gap-2 overflow-hidden">\n                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="flex-shrink-0" viewBox="0 0 16 16"><path d="M4 0h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zM2 2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H2z"/><path d="M4.5 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-2a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-2a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5z"/></svg>\n                                    <span class="truncate" title="${e.description} (${e.fileType.toUpperCase()})">${e.description} (${e.fileType.toUpperCase()})</span>\n                                </div>\n                                <span class="text-xs text-slate-400 flex-shrink-0 ml-2">${e.date}</span>\n                            </button>\n                        `).join("")}\n                    </div>\n                </div>\n                `:"";i=`\n                <div class="timeline-details-body mt-2 pt-2 border-t border-slate-200 text-sm">\n                    <p class="mb-1"><strong>Status:</strong> ${t.status}</p>\n                    <p class="mb-1"><strong>Prioridade:</strong> ${t.priority}</p>\n                    <p class="mb-1"><strong>CID:</strong> ${t.cid}</p>\n                    <p class="mb-2"><strong>Executante:</strong> ${t.provider||"Não definido"}</p>\n                    ${a}\n                </div>\n            `}else if("document"===e.type){const t=e.details;i=`\n                <div class="timeline-details-body mt-2 pt-2 border-t border-slate-200">\n                    <button class="view-document-btn w-full text-sm bg-gray-100 text-gray-800 py-1 rounded hover:bg-gray-200" data-idp="${t.idp}" data-ids="${t.ids}">\n                        Visualizar Documento\n                    </button>\n                </div>\n            `}return`\n                    <div class="relative pl-10 timeline-item" data-event-type="${e.type}">\n                        <div class="absolute left-4 top-2 -ml-[15px] h-[30px] w-[30px] rounded-full ${t.bgColorClass} border-2 border-white flex items-center justify-center ${t.iconColorClass}" title="${t.label}">\n                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">\n                                <path d="${t.icon}" />\n                            </svg>\n                        </div>\n                        <div class="bg-slate-50 p-3 rounded-lg border border-slate-200">\n                            <div class="timeline-header cursor-pointer">\n                                <div class="flex justify-between items-start">\n                                    <div>\n                                        <p class="text-sm font-semibold text-${t.color}-700">${e.title}</p>\n                                        <p class="text-xs text-slate-600">${e.summary}</p>\n                                    </div>\n                                    <div class="text-right flex-shrink-0 ml-2">\n                                        <p class="text-xs font-medium text-slate-500">${a}</p>\n                                        ${n}\n                                    </div>\n                                </div>\n                            </div>\n                            ${i}\n                        </div>\n                    </div>\n                `}).join(""),n+="</div>"}a.innerHTML=n}},733:(e,t,a)=>{a.d(t,{J:()=>s});const s={consultations:[{id:"consultation-date-range",label:"Filtro de Datas",type:"component",componentName:"date-range",section:"consultations",defaultLocation:"main"},{id:"consultation-filter-keyword",label:"Busca por Palavra-chave",type:"text",section:"consultations",defaultLocation:"main",placeholder:"Busque em todo o conteúdo..."},{id:"hide-no-show-checkbox",label:"Ocultar faltas",type:"checkbox",section:"consultations",defaultLocation:"main",defaultChecked:!1},{id:"fetch-type-buttons",label:"Tipo de Consulta",type:"selectGroup",section:"consultations",defaultLocation:"more",options:[{value:"all",text:"Todas"},{value:"basic",text:"Básicas"},{value:"specialized",text:"Especializadas"}]},{id:"consultation-filter-cid",label:"CID/CIAP",type:"text",section:"consultations",defaultLocation:"more",placeholder:"Ex: A09, Z00..."},{id:"consultation-filter-specialty",label:"Especialidade",type:"text",section:"consultations",defaultLocation:"more",placeholder:"Digite especialidades, separe por vírgula..."},{id:"consultation-filter-professional",label:"Profissional",type:"text",section:"consultations",defaultLocation:"more",placeholder:"Digite nomes, separe por vírgula..."},{id:"consultation-filter-unit",label:"Unidade de Saúde",type:"text",section:"consultations",defaultLocation:"more",placeholder:"Digite unidades, separe por vírgula..."},{id:"consultation-saved-filters",label:"Filtros Salvos",type:"component",componentName:"saved-filters",section:"consultations",defaultLocation:"more"}],exams:[{id:"exam-date-range",label:"Filtro de Datas",type:"component",componentName:"date-range",section:"exams",defaultLocation:"main"},{id:"exam-fetch-type-buttons",label:"Status do Resultado",type:"selectGroup",section:"exams",defaultLocation:"main",options:[{value:"all",text:"Todos"},{value:"withResult",text:"Com Resultado"},{value:"withoutResult",text:"Sem Resultado"}]},{id:"exam-filter-name",label:"Nome do Exame",type:"text",section:"exams",defaultLocation:"main",placeholder:"Digite nomes, separe por vírgula..."},{id:"exam-filter-professional",label:"Profissional Solicitante",type:"text",section:"exams",defaultLocation:"more",placeholder:"Digite nomes, separe por vírgula..."},{id:"exam-filter-specialty",label:"Especialidade Solicitante",type:"text",section:"exams",defaultLocation:"more",placeholder:"Digite especialidades, separe por vírgula..."},{id:"exam-saved-filters",label:"Filtros Salvos",type:"component",componentName:"saved-filters",section:"exams",defaultLocation:"more"}],appointments:[{id:"appointment-date-range",label:"Filtro de Datas",type:"component",componentName:"date-range",section:"appointments",defaultLocation:"main"},{id:"appointment-fetch-type-buttons",label:"Tipo de Agendamento",type:"selectGroup",section:"appointments",defaultLocation:"main",options:[{value:"all",text:"Todos"},{value:"consultas",text:"Consultas"},{value:"exames",text:"Exames"}]},{id:"appointment-filter-status",label:"Status",type:"select",section:"appointments",defaultLocation:"main",options:[{value:"todos",text:"Todos"},{value:"AGENDADO",text:"Agendado"},{value:"PRESENTE",text:"Presente"},{value:"FALTOU",text:"Faltou"},{value:"CANCELADO",text:"Cancelado"},{value:"ATENDIDO",text:"Atendido"}]},{id:"appointment-filter-term",label:"Busca por Termo",type:"text",section:"appointments",defaultLocation:"more",placeholder:"Profissional, especialidade..."},{id:"appointment-filter-location",label:"Local",type:"text",section:"appointments",defaultLocation:"more",placeholder:"Digite locais, separe por vírgula..."},{id:"appointment-saved-filters",label:"Filtros Salvos",type:"component",componentName:"saved-filters",section:"appointments",defaultLocation:"more"}],regulations:[{id:"regulation-date-range",label:"Filtro de Datas",type:"component",componentName:"date-range",section:"regulations",defaultLocation:"main"},{id:"regulation-fetch-type-buttons",label:"Modalidade",type:"selectGroup",section:"regulations",defaultLocation:"main",options:[{value:"all",text:"Todos"},{value:"ENC",text:"Consultas"},{value:"EXA",text:"Exames"}]},{id:"regulation-filter-status",label:"Status",type:"select",section:"regulations",defaultLocation:"main",options:[{value:"todos",text:"Todos"},{value:"AUTORIZADO",text:"Autorizado"},{value:"PENDENTE",text:"Pendente"},{value:"NEGADO",text:"Negado"},{value:"DEVOLVIDO",text:"Devolvido"},{value:"CANCELADA",text:"Cancelada"},{value:"EM ANÁLISE",text:"Em Análise"}]},{id:"regulation-filter-priority",label:"Prioridade",type:"select",section:"regulations",defaultLocation:"more",options:[{value:"todas",text:"Todas"}]},{id:"regulation-filter-procedure",label:"Procedimento/Especialidade",type:"text",section:"regulations",defaultLocation:"more",placeholder:"Ex: Ortopedia, Raio X..."},{id:"regulation-filter-requester",label:"Profissional/Unidade Solicitante",type:"text",section:"regulations",defaultLocation:"more",placeholder:"Digite nomes, separe por vírgula..."},{id:"regulation-saved-filters",label:"Filtros Salvos",type:"component",componentName:"saved-filters",section:"regulations",defaultLocation:"more"}],documents:[{id:"document-date-range",label:"Filtro de Datas",type:"component",componentName:"date-range",section:"documents",defaultLocation:"main"},{id:"document-filter-keyword",label:"Busca por Palavra-chave",type:"text",section:"documents",defaultLocation:"main",placeholder:"Busque na descrição do documento..."}]}},869:(e,t,a)=>{a.d(t,{Q:()=>n});const s=e=>"t"===e||!0===e?"Sim":"f"===e||!1===e?"Não":e,n=[{id:"nomeCompleto",key:"entidadeFisica.entidade.entiNome",cadsusKey:2,label:"Nome",enabled:!0,section:"main",order:1},{id:"cpf",key:"entidadeFisica.entfCPF",cadsusKey:50,label:"CPF",enabled:!0,section:"main",order:2,formatter:e=>String(e||"").replace(/\D/g,"")},{id:"cns",key:"isenNumCadSus",cadsusKey:e=>(String(e[1])||"").split("\n")[0].replace(/\s*\(.*\)/,"").trim(),label:"CNS",enabled:!0,section:"main",order:3},{id:"nomeMae",key:"entidadeFisica.entfNomeMae",cadsusKey:7,label:"Nome da Mãe",enabled:!0,section:"main",order:4},{id:"dtNasc",key:"entidadeFisica.entfDtNasc",cadsusKey:3,label:"Nascimento",enabled:!0,section:"main",order:5},{id:"telefone",key:e=>{var t,a,s,n;return`${(null===(t=e.entidadeFisica)||void 0===t||null===(a=t.entidade)||void 0===a?void 0:a.entiTel1Pre)||""}${(null===(s=e.entidadeFisica)||void 0===s||null===(n=s.entidade)||void 0===n?void 0:n.entiTel1)||""}`},cadsusKey:16,label:"Telefone",enabled:!0,section:"main",order:6,formatter:e=>{if(!e)return"";const t=String(e).replace(/\D/g,"").replace(/^55/,"");return 11===t.length?t.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):10===t.length?t.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3"):e}},{id:"nomeSocial",key:"entidadeFisica.entidade.entiNomeSocial",cadsusKey:null,label:"Nome Social",enabled:!0,section:"more",order:1},{id:"rg",key:"entidadeFisica.entfRG",cadsusKey:51,label:"RG",enabled:!0,section:"more",order:2},{id:"endereco",key:e=>{var t,a,s,n,i,o,r;return`${(null===(t=e.entidadeFisica)||void 0===t||null===(a=t.entidade)||void 0===a||null===(s=a.logradouro)||void 0===s||null===(n=s.tipoLogradouro)||void 0===n?void 0:n.tiloNome)||""} ${String((null===(i=e.entidadeFisica)||void 0===i||null===(o=i.entidade)||void 0===o||null===(r=o.logradouro)||void 0===r?void 0:r.logrNome)||"").split("/")[0].trim()}`.trim()},cadsusKey:e=>`${String(e[35]||"")} ${String(e[34]||"").split("/")[0].trim()}`.trim(),label:"Endereço",enabled:!0,section:"more",order:3},{id:"bairro",key:"entidadeFisica.entidade.localidade.locaNome",cadsusKey:30,label:"Bairro",enabled:!0,section:"more",order:4},{id:"cidade",key:"entidadeFisica.entidade.localidade.cidade.cidaNome",cadsusKey:29,label:"Cidade",enabled:!0,section:"more",order:5},{id:"cep",key:"entidadeFisica.entidade.entiEndeCEP",cadsusKey:41,label:"CEP",enabled:!0,section:"more",order:6,formatter:e=>String(e||"").replace(/\D/g,"")},{id:"alergiaMedicamentos",key:"isenAlergMedicamentos",cadsusKey:null,label:"Alergia a Medicamentos",enabled:!0,section:"more",order:7},{id:"alergiaAlimentos",key:"isenAlergAlimentos",cadsusKey:null,label:"Alergia a Alimentos",enabled:!0,section:"more",order:8},{id:"alergiaQuimicos",key:"isenAlergElementosQuimicos",cadsusKey:null,label:"Alergia a Químicos",enabled:!0,section:"more",order:9},{id:"acamado",key:"isenIsAcamado",cadsusKey:null,label:"Acamado",enabled:!0,section:"more",order:10,formatter:s},{id:"deficiente",key:"isenPessoaDeficiente",cadsusKey:null,label:"Pessoa com Deficiência",enabled:!0,section:"more",order:11,formatter:s},{id:"gemeo",key:"isenPossuiIrmaoGemeo",cadsusKey:null,label:"Possui Irmão Gêmeo",enabled:!0,section:"more",order:12,formatter:s},{id:"statusCadastro",key:"status.valor",cadsusKey:null,label:"Status do Cadastro",enabled:!0,section:"more",order:13},{id:"unidadeSaude",key:"unidadeSaude.entidade.entiNome",cadsusKey:null,label:"Unidade de Saúde",enabled:!0,section:"more",order:14},{id:"observacao",key:"entidadeFisica.entidade.entiObs",cadsusKey:null,label:"Observação do Cadastro",enabled:!0,section:"more",order:15},{id:"nomePai",key:"entidadeFisica.entfNomePai",cadsusKey:8,label:"Nome do Pai",enabled:!1,section:"more",order:16},{id:"racaCor",key:"entidadeFisica.racaCor.racoNome",cadsusKey:11,label:"Raça/Cor",enabled:!1,section:"more",order:17},{id:"grauInstrucao",key:"entidadeFisica.grauInstrucao.grinNome",cadsusKey:null,label:"Grau de Instrução",enabled:!1,section:"more",order:18},{id:"cidadeNascimento",key:"entidadeFisica.cidadeNasc.cidaNome",cadsusKey:45,label:"Cidade de Nascimento",enabled:!1,section:"more",order:19},{id:"nacionalidade",key:"entidadeFisica.nacionalidade.naciDescricao",cadsusKey:23,label:"Nacionalidade",enabled:!1,section:"more",order:20},{id:"religiao",key:"entidadeFisica.religiao.reliNome",cadsusKey:null,label:"Religião",enabled:!1,section:"more",order:21},{id:"cbo",key:"entidadeFisica.cbo.dcboNome",cadsusKey:null,label:"Profissão (CBO)",enabled:!1,section:"more",order:22},{id:"pis",key:"entidadeFisica.entfPis",cadsusKey:55,label:"PIS",enabled:!1,section:"more",order:23},{id:"ctps",key:e=>{var t,a;const s=(null===(t=e.entidadeFisica)||void 0===t?void 0:t.entfCTPS)||"",n=(null===(a=e.entidadeFisica)||void 0===a?void 0:a.entfCTPSSerie)||"";return s?`${s} (Série: ${n})`:""},cadsusKey:null,label:"CTPS",enabled:!1,section:"more",order:24},{id:"convulsivo",key:"isenIsConvulsivo",cadsusKey:null,label:"É Convulsivo",enabled:!0,section:"more",order:25,formatter:s},{id:"bpc",key:"isenRecebeBPC",cadsusKey:null,label:"Recebe BPC",enabled:!0,section:"more",order:26,formatter:s},{id:"autista",key:"isenEspectroAutista",cadsusKey:null,label:"Espectro Autista",enabled:!0,section:"more",order:27,formatter:s}]}}]);