{"version":3,"file":"content-script.js","mappings":";;UAAA;UACA;;;;;WCDA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D,E;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;;AAEA,CAAC,YAAY;EACXA,OAAO,CAACC,GAAG,CACT,+EACF,CAAC;EAED,MAAMC,GAAG,GAAGC,OAAO;EACnB,IAAIC,mBAAmB,GAAG,IAAI;EAE9B,MAAMC,mBAAmB,GAAGA,CAAA,KAAM;IAChC,MAAMC,mBAAmB,GAAGC,QAAQ,CAACC,cAAc,CAAC,iBAAiB,CAAC;IACtE,MAAMC,QAAQ,GACZH,mBAAmB,IACnBA,mBAAmB,CAACI,YAAY,CAAC,eAAe,CAAC,KAAK,MAAM;IAE9D,IAAID,QAAQ,EAAE;MACZ,MAAME,UAAU,GAAGJ,QAAQ,CAACK,aAAa,CAAC,sBAAsB,CAAC;MACjE,MAAMC,UAAU,GAAGN,QAAQ,CAACK,aAAa,CAAC,sBAAsB,CAAC;MAEjE,IAAID,UAAU,IAAIE,UAAU,IAAIF,UAAU,CAACG,KAAK,EAAE;QAChD,MAAMC,OAAO,GAAGJ,UAAU,CAACG,KAAK;QAChC,MAAME,OAAO,GAAGH,UAAU,CAACC,KAAK;QAChC,MAAMG,aAAa,GAAG,GAAGF,OAAO,IAAIC,OAAO,EAAE;QAE7C,IAAIC,aAAa,KAAKb,mBAAmB,EAAE;UACzCA,mBAAmB,GAAGa,aAAa;UACnC,MAAMC,OAAO,GAAG;YAAEH,OAAO;YAAEC;UAAQ,CAAC;UAEpChB,OAAO,CAACC,GAAG,CACT,4EAA4E,EAC5EiB,OACF,CAAC;;UAED;UACA,IAAI;YACFhB,GAAG,CAACiB,OAAO,CAACC,WAAW,CAAC;cAAEC,IAAI,EAAE,sBAAsB;cAAEH;YAAQ,CAAC,CAAC;UACpE,CAAC,CAAC,OAAOI,CAAC,EAAE;YACVtB,OAAO,CAACuB,KAAK,CACX,iEAAiE,EACjED,CACF,CAAC;UACH;QACF;MACF;IACF,CAAC,MAAM;MACLlB,mBAAmB,GAAG,IAAI;IAC5B;EACF,CAAC;EAED,MAAMoB,QAAQ,GAAG,IAAIC,gBAAgB,CAAC,MAAM;IAC1CC,YAAY,CAACF,QAAQ,CAACG,eAAe,CAAC;IACtCH,QAAQ,CAACG,eAAe,GAAGC,UAAU,CAACvB,mBAAmB,EAAE,GAAG,CAAC;EACjE,CAAC,CAAC;EAEFmB,QAAQ,CAACK,OAAO,CAACtB,QAAQ,CAACuB,IAAI,EAAE;IAC9BC,SAAS,EAAE,IAAI;IACfC,OAAO,EAAE,IAAI;IACbC,UAAU,EAAE,IAAI;IAChBC,eAAe,EAAE,CAAC,OAAO,EAAE,eAAe,EAAE,OAAO;EACrD,CAAC,CAAC;AACJ,CAAC,EAAE,CAAC,C","sources":["webpack://assistente-de-regulacao-medica/webpack/bootstrap","webpack://assistente-de-regulacao-medica/webpack/runtime/make namespace object","webpack://assistente-de-regulacao-medica/./content-script.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\r\n * @file Content Script para a extensão Assistente de Regulação (v16 - Detecção com Broker).\r\n * Este script observa a abertura da aba de manutenção e envia os IDs para o background script,\r\n * que atua como um intermediário para salvar os dados no storage.session.\r\n */\r\n\r\n(function () {\r\n  console.log(\r\n    '[Assistente de Regulação] Script de controle v16 (Detecção com Broker) ativo.'\r\n  );\r\n\r\n  const api = browser;\r\n  let lastProcessedReguId = null;\r\n\r\n  const checkMaintenanceTab = () => {\r\n    const maintenanceTabPanel = document.getElementById('tabs-manutencao');\r\n    const isActive =\r\n      maintenanceTabPanel &&\r\n      maintenanceTabPanel.getAttribute('aria-expanded') === 'true';\r\n\r\n    if (isActive) {\r\n      const idpElement = document.querySelector('#regu\\\\.reguPK\\\\.idp');\r\n      const idsElement = document.querySelector('#regu\\\\.reguPK\\\\.ids');\r\n\r\n      if (idpElement && idsElement && idpElement.value) {\r\n        const reguIdp = idpElement.value;\r\n        const reguIds = idsElement.value;\r\n        const currentReguId = `${reguIdp}-${reguIds}`;\r\n\r\n        if (currentReguId !== lastProcessedReguId) {\r\n          lastProcessedReguId = currentReguId;\r\n          const payload = { reguIdp, reguIds };\r\n\r\n          console.log(\r\n            '[Assistente] Aba Manutenção aberta. Enviando IDs para o background script:',\r\n            payload\r\n          );\r\n\r\n          // Envia a mensagem para o background script, que tem acesso ao storage.session\r\n          try {\r\n            api.runtime.sendMessage({ type: 'SAVE_REGULATION_DATA', payload });\r\n          } catch (e) {\r\n            console.error(\r\n              '[Assistente] Falha ao enviar mensagem para o background script:',\r\n              e\r\n            );\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      lastProcessedReguId = null;\r\n    }\r\n  };\r\n\r\n  const observer = new MutationObserver(() => {\r\n    clearTimeout(observer.debounceTimeout);\r\n    observer.debounceTimeout = setTimeout(checkMaintenanceTab, 250);\r\n  });\r\n\r\n  observer.observe(document.body, {\r\n    childList: true,\r\n    subtree: true,\r\n    attributes: true,\r\n    attributeFilter: ['style', 'aria-expanded', 'class'],\r\n  });\r\n})();\r\n"],"names":["console","log","api","browser","lastProcessedReguId","checkMaintenanceTab","maintenanceTabPanel","document","getElementById","isActive","getAttribute","idpElement","querySelector","idsElement","value","reguIdp","reguIds","currentReguId","payload","runtime","sendMessage","type","e","error","observer","MutationObserver","clearTimeout","debounceTimeout","setTimeout","observe","body","childList","subtree","attributes","attributeFilter"],"sourceRoot":""}